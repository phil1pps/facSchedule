<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
>
<head>
    <title>Spring Security Example </title>
    <div th:replace="fragments/header :: header-css"></div>
</head>
<body>

<div th:replace="fragments/header :: header"></div>

<div class="container">

    <div class="row" style="margin-top:20px">
        <div class="col-xs-12 col-sm-8 col-md-6 col-sm-offset-2 col-md-offset-3">
            <form method="post" th:action="@{/login}">
                <fieldset>
                    <h1>Please Sign In</h1>

                    <div th:if="${param.error}">
                        <div class="alert alert-danger">
                            Invalid username and password.
                        </div> //sds
                    </div>
                    <div th:if="${param.logout}">
                        <div class="alert alert-info">
                            You have been logged out.
                        </div>
                    </div>

                    <div class="form-group">
                        <input type="text" name="username" id="username" class="form-control input-lg"
                               placeholder="UserName" required="true" autofocus="true"/>
                    </div>
                    <div class="form-group">
                        <input type="password" name="password" id="password" class="form-control input-lg"
                               placeholder="Password" required="true"/>
                    </div>

                    <div class="row">
                        <div class="col-xs-6 col-sm-6 col-md-6">
                            <input id="logIn" type="submit" class="btn btn-lg btn-primary btn-block" value="Sign In"/>
                        </div>
                        <script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.js"></script>
                        <script>
                            $(function() {
                                $("#logIn").click(function () {
                                    let username=$("#username").val();
                                    let password=$("#password").val();
                                    $.ajax({
                                        cache: true,
                                        type: "POST",
                                        url: "/auth",
                                        contentType: "application/json;charset=UTF-8",
                                        data:JSON.stringify({"login":username ,"password" : password}),
                                        dataType: "json",
                                        async: false,
                                        error: function (request) {
                                            console.log("Connection error");
                                        },
                                        success: function (data) {
                                            //save token
                                            localStorage.setItem("token",data.token);
                                            console.log( localStorage.getItem("token"));

                                        }
                                    });
                                });
                            });
                        </script>
                        <div class="col-xs-6 col-sm-6 col-md-6">
                            <a class="btn btn-lg btn-primary btn-block" th:href="@{/registration}">
                                Sign Up
                            </a>
                        </div>
                    </div>

                </fieldset>
            </form>
        </div>
    </div>

</div>

<div th:replace="fragments/footer :: footer"></div>

</body>
</html>




<!--
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
>
<head>
    <title>Spring Security Example </title>
    <div th:replace="fragments/header :: header-css"></div>
</head>
<body>

<div th:replace="fragments/header :: header"></div>

<div class="container">

    <div class="row" style="margin-top:20px">
        <div class="col-xs-12 col-sm-8 col-md-6 col-sm-offset-2 col-md-offset-3">
            <form method="post">
                <fieldset>
                    <h1>Please Sign In</h1>

                    <div th:if="${param.error}">
                        <div class="alert alert-danger">
                            Invalid username and password.
                        </div> //sds
                    </div>
                    <div th:if="${param.logout}">
                        <div class="alert alert-info">
                            You have been logged out.
                        </div>
                    </div>

                    <div class="form-group">
                        <input type="text" name="username" id="username" class="form-control input-lg"
                               placeholder="UserName" required="true" autofocus="true"/>
                    </div>
                    <div class="form-group">
                        <input type="password" name="password" id="password" class="form-control input-lg"
                               placeholder="Password" required="true"/>
                    </div>

                    <div class="row">
                        <div class="col-xs-6 col-sm-6 col-md-6">
                            <input id="logIn" type="button" class="btn btn-lg btn-primary btn-block" value="Sign In"/>
                        </div>
                        <div class="col-xs-6 col-sm-6 col-md-6">
                            <a class="btn btn-lg btn-primary btn-block" th:href="@{/registration}">
                                Sign Up
                            </a>
                        </div>
                    </div>
                    <script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.js"></script>
                    <script>
                        $(function() {
                            $("#logIn").click(function () {
                                let username=$("#username").val();
                                let password=$("#password").val();
                                $.ajax({
                                    cache: true,
                                    type: "POST",
                                    url: "/auth",
                                    contentType: "application/json;charset=UTF-8",
                                    data:JSON.stringify({"login":username ,"password" : password}),
                                    dataType: "json",
                                    async: false,
                                    error: function (request) {
                                        console.log("Connection error");
                                    },
                                    success: function (data) {
                                        //save token
                                        localStorage.setItem("token",data.token);
                                        console.log( localStorage.getItem("token"));

                                    }
                                });
                                window.location.replace("http://localhost:8080/");
                            });
                        });
                    </script>
                </fieldset>
            </form>
        </div>
    </div>

</div>

<div th:replace="fragments/footer :: footer"></div>

</body>
</html>

-->
